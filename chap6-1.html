<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>Git In The Trenches</title>
<link href="stylesheet.css" rel="stylesheet" type="text/css">
<link type="text/css" href="menu.css" rel="stylesheet" />
	<script type="text/javascript" src="jquery.js"></script>
	<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-228354-4']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</head>

<body>
<table width="1000" border="0" align="center" cellpadding="0" cellspacing="0">
  <tr>
    <td><table width="100%"  border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td><table width="100%"  border="0" cellspacing="0" cellpadding="0">
          <tr>
            <td class="logo"><a href="index.html"><img src="images/git_logo_new.png" alt="Git In The Trenches" height="61" border="0"></a></td>
            <td class="nav">
				<a href="index.html">Home</a>&nbsp;&nbsp;|&nbsp;&nbsp;
				<a href="download.html">Download Now</a>&nbsp;&nbsp;|&nbsp;&nbsp;
				<a href="intro.html">Read Now</a>&nbsp;&nbsp;|&nbsp;&nbsp;
				<a href="http://github.com/cbx33/gitt">Source</a>&nbsp;&nbsp;|&nbsp;&nbsp;
				<a href="feedback.html">Feeback</a>
			</td>
          </tr>
        </table></td>
      </tr>
      <tr>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td class="main_content_pad"><table width="100%"  border="0" cellspacing="0" cellpadding="0">
          <tr>
            <td width="309"><table width="100%"  border="0" cellspacing="0" cellpadding="0">
              <tr>
                <td class="subnav">
				<strong>Introduction</strong><br>
&bull;&nbsp;&nbsp;<a href="intro.html">How this book works</a><br>
<div class="divider"></div>
<strong>Setting up</strong><br>
&bull;&nbsp;&nbsp;<a href="setup.html">Making sure you have everything</a><br>
<div class="divider"></div>
<strong>Week 1</strong><br>
<span>&bull; Day 1 </span> - <a href="chap1-1.html"> "Things need to change"</a><br>
<span>&bull; Day 3 </span> - <a href="chap1-2.html"> "A possible solution"</a><br>
<span>&bull; Day 4 </span> - <a href="chap1-3.html"> "A decision is reached"</a><br>
<span>&bull; Day 5 </span> - <a href="chap1-4.html"> "Working like a team"</a><br>
<div class="divider"></div>
<strong>After Hours Week 1</strong><br>
&bull;&nbsp;&nbsp;<a href="afterhours1-1.html">"History Lesson"</a><br>
<div class="divider"></div>
<strong>Week 2</strong><br>
<span>&bull; Day 1 </span> - <a href="chap2-1.html"> "We are coders, we use Git!"</a><br>
<span>&bull; Day 2 </span> - <a href="chap2-2.html"> "Making commitments"</a><br>
<span>&bull; Day 4 </span> - <a href="chap2-3.html"> "Let's do this right, not fast"</a><br>
<span>&bull; Summary </span> - <a href="chap2-4.html"> John's Notes</a><br>
<div class="divider"></div>
<strong>After Hours Week 2</strong><br>
&bull;&nbsp;&nbsp;<a href="afterhours2-1.html">"A Little Of Git's Internals"</a><br>
<div class="divider"></div>
<strong>Week 3</strong><br>
<span>&bull; Day 1 </span> - <a href="chap3-1.html"> "How do I see what's going on?"</a><br>
<span>&bull; Day 2 </span> - <a href="chap3-2.html"> "But I need more information"</a><br>
<span>&bull; Day 3 </span> - <a href="chap3-3.html"> "What actually changed?"</a><br>
<span>&bull; Day 4 </span> - <a href="chap3-4.html"> "Finding a good reference point"</a><br>
<span>&bull; Day 5 </span> - <a href="chap3-5.html"> "Putting things back again"</a><br>
<span>&bull; Summary </span> - <a href="chap3-6.html"> John's Notes</a><br>
<div class="divider"></div>
<strong>After Hours Week 3</strong><br>
&bull;&nbsp;&nbsp;<a href="afterhours3-1.html">"A Closer Look At Diffs and Tags"</a><br>
<div class="divider"></div>
<strong>Week 4</strong><br>
<span>&bull; Day 1 </span> - <a href="chap4-1.html"> "We're getting somewhere"</a><br>
<span>&bull; Day 2 </span> - <a href="chap4-2.html"> "Branches galore"</a><br>
<span>&bull; Day 3 </span> - <a href="chap4-3.html"> "Tricking the twigs"</a><br>
<span>&bull; Day 4 </span> - <a href="chap4-4.html"> "I pressed delete..."</a><br>
<span>&bull; Day 5 </span> - <a href="chap4-5.html"> "Conflicting information"</a><br>
<span>&bull; Summary </span> - <a href="chap4-6.html"> John's Notes</a><br>
<div class="divider"></div>
<strong>After Hours Week 4</strong><br>
&bull;&nbsp;&nbsp;<a href="afterhours4-1.html">"Merge merge merge"</a><br>
&bull;&nbsp;&nbsp;<a href="afterhours4-2.html">"Grepping your life away"</a><br>
<div class="divider"></div>
<strong>Week 5</strong><br>
<span>&bull; Day 1 </span> - <a href="chap5-1.html"> "This isn't working for me John"</a><br>
<span>&bull; Day 2 </span> - <a href="chap5-2.html"> "Back to logging"</a><br>
<span>&bull; Day 4 </span> - <a href="chap5-3.html"> "Advanced Techniques"</a><br>
<span>&bull; Summary </span> - <a href="chap5-4.html"> John's Notes</a><br>
<div class="divider"></div>
<strong>After Hours Week 5</strong><br>
&bull;&nbsp;&nbsp;<a href="afterhours5-1.html">"Splitting up commits the easy way"</a><br>
<div class="divider"></div>
<strong>Week 6</strong><br>
<span>&bull; Day 1 </span> - <a href="chap6-1.html"> "My private little stash"</a><br>
<span>&bull; Day 2 </span> - <a href="chap6-2.html"> "What?! No backup?"</a><br>
<span>&bull; Day 3 </span> - <a href="chap6-3.html"> "Is this clone for real?"</a><br>
<span>&bull; Day 4 </span> - <a href="chap6-4.html"> "Help I'm no longer up to date?"</a><br>
<span>&bull; Day 5 </span> - <a href="chap6-5.html"> "I'm putting my foot down"</a><br>
<span>&bull; Summary </span> - <a href="chap6-6.html"> John's Notes</a><br>
<div class="divider"></div>
<strong>After Hours Week 6</strong><br>
&bull;&nbsp;&nbsp;<a href="afterhours6-1.html">"Tug of war"</a><br>
&bull;&nbsp;&nbsp;<a href="afterhours6-2.html">"Referring to objects"</a><br>
<div class="divider"></div>
<strong>Week 7</strong><br>
<span>&bull; Day 1 </span> - <a href="chap7-1.html"> "Networking with a difference"</a><br>
<span>&bull; Day 2 </span> - <a href="chap7-2.html"> "Now let's work together"</a><br>
<span>&bull; Day 3 </span> - <a href="chap7-3.html"> "Rebasing our commitments"</a><br>
<span>&bull; Day 4 </span> - <a href="chap7-4.html"> "Starting to get rebased"</a><br>
<span>&bull; Day 5 </span> - <a href="chap7-5.html"> "I could rebase the world"</a><br>
<span>&bull; Summary </span> - <a href="chap7-6.html"> John's Notes</a><br>
<div class="divider"></div>
<strong>After Hours Week 7</strong><br>
&bull;&nbsp;&nbsp;<a href="afterhours7-1.html">"Network Communicating"</a><br>
<div class="divider"></div>
<strong>Week 8</strong><br>
<span>&bull; Day 1 </span> - <a href="chap8-1.html"> "Give a man a patch"</a><br>
<span>&bull; Day 2 </span> - <a href="chap8-2.html"> "Looking for problems"</a><br>
<span>&bull; Day 3 </span> - <a href="chap8-3.html"> "Filtered repos"</a><br>
<span>&bull; Day 4 </span> - <a href="chap8-4.html"> "Let's make a library"</a><br>
<span>&bull; Day 5 </span> - <a href="chap8-5.html"> "Shhh....we're in a library"</a><br>
<span>&bull; Summary </span> - <a href="chap8-6.html"> John's Notes</a><br>
<div class="divider"></div>
<strong>After Hours Week 8</strong><br>
&bull;&nbsp;&nbsp;<a href="afterhours8-1.html">"Fishing for beginners"</a><br>
<div class="divider"></div>
<strong>A little extra help</strong><br>
&bull;&nbsp;&nbsp;<a href="chap9-1.html">Taking things further</a><br>
&bull;&nbsp;&nbsp;<a href="chap9-2.html">The end of the journey</a><br>
<div class="divider"></div>

				
				<td class="fade_right">&nbsp;</td>
              </tr>
              <tr>
                <td class="fade_bot">&nbsp;</td>
                <td class="fade_corner">&nbsp;</td>
              </tr>
            </table>              <h1>&nbsp;</h1>
              </td>
            <td><table width="100%"  border="0" cellspacing="0" cellpadding="0">
              <tr>
                <td class="read_content">
<h1>Week 6</h1><h2>Day 1 - "My private little stash"</h2>
<h3>Getting interrupted</h3>
We're getting close to the point where we can really start using Git as we originally intended, the team at Tamagoyaki Inc.
are also getting much more acquainted with the operations of both version control and Git in particular.
Unfortunately things don't always go as smoothly as we would like.
The following scenario demonstrates just this.<br><div id="trenchblock"><strong>In the trenches...</strong><br>
"Yeh but Martha, I need you to work on this fix now! Not in five minutes."<br><br>"Klaus I'm kinda in the middle of something else yet, and I'm not ready to commit," said Martha, feeling a little concerned.
She was used to Klaus making demands on his time, but she had spent a while working on this particular fix for John and she just wasn't ready to finish up yet.<br><br>"You could always use the stash feature."
It was Rob again, it seemed as if this young user had cottoned on to Git quicker than most of the seasoned developers."<br><br>Klaus seemed unimpressed, "What the heck does that do?"<br><br>"Allows you to move your changes to somewhere else until you are ready to finish them."<br><br>"Please Rob," started Martha,
"Can you show me what you mean? Sounds exactly like what I need"
</div><br>Sometimes you could be in the middle of something when another really important task comes up.
When this happens you are often required to drop everything and carry on with another task.
Often this can be quite difficult.
You may be in a development branch, but unable or unwilling to make a commit at this stage.
So how can we deal with this?<br><br>Well, one way of dealing with this situation, and this is not necessarily the best way, is to do the steps outlined below;<br><div style="padding-left:10px;"><ol><li>Make a new branch called something like WIP</li>
<li>Pull changes into this new branch</li>
<li>Commit changes into WIP branch</li>
<li>Switch back to the branch we need to work on</li>
<li>Make our changes and commit them</li>
<li>Merge in our WIP branch on top with the <code class="ncode">--no-commit</code> option</li>
<li>Delete the WIP branch</li>
<li>Continue development in our original branch</li>
</ol></div><br>That may seem like a lot of work.
OK, the benefit is a fairly awesome one, but at the cost of considerable command line hackery to get there.
It would be nice if there was an easy way to do the above, and though someone of you may be screaming something like <em>shell script</em> right about now, you can rest your fingers.
We actually have another tool in the Git toolbox to help us out.<br><br>The <code class="ncode">git stash</code> command is used for exactly these situations.
Let us make a quick example of how to use it in our test repository.
To begin with we are going to make a few changes to the <strong>master</strong> branch, before we are interrupted.<br><div id="codeblock"><code><strong>john@satsuki:~/coderepo$ git checkout master</strong><br>
Already on 'master'<br>
<strong>john@satsuki:~/coderepo$ echo "Number strings rule 1234" &gt;&gt; another_file</strong><br>
<strong>john@satsuki:~/coderepo$</strong><br>
</code></div><br>So now we are interrupted and we have to make some important, and urgent changes to our <strong>master</strong> branch.
The example that follows is one way that we could use the <code class="ncode">git stash</code> command to help us out.<br><div id="codeblock"><code><strong>john@satsuki:~/coderepo$ git stash</strong><br>
Saved working directory and index state WIP on master: d50ffb2 Merged in zaney<br>
HEAD is now at d50ffb2 Merged in zaney<br>
<strong>john@satsuki:~/coderepo$ echo "Some mega important changes" &gt;&gt; newfile1</strong><br>
<strong>john@satsuki:~/coderepo$ git commit -a -m 'Important Update'</strong><br>
[master 9cb2af2] Important Update<br>
 1 files changed, 1 insertions(+), 0 deletions(-)<br>
<strong>john@satsuki:~/coderepo$</strong><br>
</code></div><br>So using the <code class="ncode">git stash</code> command, we have squirrelled all of our developmental changes away into a <em>stash</em>.
Now we have completed the mega important change that just could not wait, we are ready to pull our changes back from the stash.
First let us see just what the stash contains.<br><div id="codeblock"><code><strong>john@satsuki:~/coderepo$ git stash list</strong><br>
stash@{0}: WIP on master: d50ffb2 Merged in zaney<br>
<strong>john@satsuki:~/coderepo$ git stash show stash@{0}</strong><br>
 another_file |    1 +<br>
 1 files changed, 1 insertions(+), 0 deletions(-)<br>
<strong>john@satsuki:~/coderepo$ git stash show stash@{0} -p</strong><br>
diff --git a/another_file b/another_file<br>
index dba885d..b3a5cc5 100644<br>
--- a/another_file<br>
+++ b/another_file<br>
@@ -1 +1,2 @@<br>
 New stuff<br>
+Number strings rule 1234<br>
<strong>john@satsuki:~/coderepo$</strong><br>
</code></div><br>As you can see, the <code class="ncode">-p</code> option to the <code class="ncode">git stash show</code> command shows us exactly what is contained in the stash.
We can apply this stash by running the following;<br><div id="codeblock"><code><strong>john@satsuki:~/coderepo$ git stash apply stash@{0}</strong><br>
# On branch master<br>
# Changed but not updated:<br>
#   (use "git add &lt;file&gt;..." to update what will be committed)<br>
#   (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)<br>
#<br>
#	modified:   another_file<br>
#<br>
# Untracked files:<br>
#   (use "git add &lt;file&gt;..." to include in what will be committed)<br>
#<br>
#	my_third_committed_file<br>
#	temp_file<br>
no changes added to commit (use "git add" and/or "git commit -a")<br>
<strong>john@satsuki:~/coderepo$ git commit -a -m 'Continued Development'</strong><br>
[master 37950f8] Continued Development<br>
 1 files changed, 1 insertions(+), 0 deletions(-)<br>
<strong>john@satsuki:~/coderepo$ git stash list</strong><br>
stash@{0}: WIP on master: d50ffb2 Merged in zaney<br>
<strong>john@satsuki:~/coderepo$</strong><br>
</code></div><br>Our stash has been applied to the current branch, in our case <strong>master</strong>, and we have gone ahead and committed these changes into the repository.
In this case we didn't have anything else to add to the index before we went ahead and committed it.<br><br>Interestingly though, our stash still exists.
If we had used the <code class="ncode">git stash pop</code> command instead of the <code class="ncode">git stash apply</code>, our stash would have been removed.
Of course we can have multiple stashes in our repository.
For completeness sake, let us learn how to manually remove a stash, and take a look at how our repository looks with our semi-graphical <code class="ncode">git log</code><br><div id="codeblock"><code><strong>john@satsuki:~/coderepo$ git stash drop stash@{0}</strong><br>
Dropped stash@{0} (193f27172fc0df278105b981815c7718204030d8)<br>
<strong>john@satsuki:~/coderepo$ git log --graph --pretty=oneline --all --abbrev-commit --decorate</strong><br>
* 37950f8 (HEAD, master) Continued Development<br>
* 9cb2af2 Important Update<br>
*   d50ffb2 Merged in zaney<br>
|\<br>
| * 7cc32db (zaney) Made another awesome change<br>
| * a27d49e Made an awesome change<br>
* | ed2301b Removed third file<br>
* |   b119573 Merge branch 'wonderful'<br>
|&nbsp;\<br>
| * | cfbecab (wonderful) Fantastic new feature<br>
| |/<br>
* | 4ac9201 Updated third file<br>
|/<br>
* 9710177 Added another file<br>
* 55fb69f (v2.0) Added two new files<br>
* 4a155e4 Removed a few files<br>
* a022d4d (tag: v1.0b, v1.0a) Messed with a few files<br>
* 9938a0c Finished adding initial files<br>
* 163f061 (v0.9) Made a few changes to first and second files<br>
* cfe23cb My First Ever Commit<br>
<strong>john@satsuki:~/coderepo$</strong><br>
</code></div><br>So using the <code class="ncode">git stash drop</code> command, you can see that it is fairly simple to drop a single stash from the list.<br><br><table border="0" cellpadding="0" cellspacing="0" width="100%">
					<tr>
						<td><p align="left"><a href="afterhours5-1.html"><img src="images/prev.png" alt="Previous Day" height="29" border="0"></a></p></td>
						<td><p align="right"><a href="chap6-2.html"><img src="images/next.png" alt="Next Day" height="29" border="0"></a></p></td>
					</tr>
				</table>                  </td>
                <td class="fade_right">&nbsp;</td>
              </tr>
              <tr>
                <td class="fade_bot">&nbsp;</td>
                <td class="fade_corner">&nbsp;</td>
              </tr>
            </table></td>
            </tr>
          </table>
		</td>
      </tr>
      <tr>
        <td class="foot"><a href="index.html">home</a> | <a href="download.html">download</a> | <a href="read.html">read now</a> | <a href="source.html">source</a> | <a href="feedback.html">feedback</a> | <a href="legal.html">legal stuff</a><br>
        </td>
      </tr>
    </table></td>
  </tr>
</table>
</body>
</html>
