<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>Git In The Trenches</title>
<link href="stylesheet.css" rel="stylesheet" type="text/css">
<link type="text/css" href="menu.css" rel="stylesheet" />
	<script type="text/javascript" src="jquery.js"></script>
	<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-228354-4']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</head>

<body>
<table width="1000" border="0" align="center" cellpadding="0" cellspacing="0">
  <tr>
    <td><table width="100%"  border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td><table width="100%"  border="0" cellspacing="0" cellpadding="0">
          <tr>
            <td class="logo"><a href="index.html"><img src="images/git_logo_new.png" alt="Git In The Trenches" height="61" border="0"></a></td>
            <td class="nav">
				<a href="index.html">Home</a>&nbsp;&nbsp;|&nbsp;&nbsp;
				<a href="download.html">Download Now</a>&nbsp;&nbsp;|&nbsp;&nbsp;
				<a href="intro.html">Read Now</a>&nbsp;&nbsp;|&nbsp;&nbsp;
				<a href="http://github.com/cbx33/gitt">Source</a>&nbsp;&nbsp;|&nbsp;&nbsp;
				<a href="feedback.html">Feeback</a>
			</td>
          </tr>
        </table></td>
      </tr>
      <tr>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td class="main_content_pad"><table width="100%"  border="0" cellspacing="0" cellpadding="0">
          <tr>
            <td width="309"><table width="100%"  border="0" cellspacing="0" cellpadding="0">
              <tr>
                <td class="subnav">
				<strong>Introduction</strong><br>
&bull;&nbsp;&nbsp;<a href="intro.html">How this book works</a><br>
<div class="divider"></div>
<strong>Setting up</strong><br>
&bull;&nbsp;&nbsp;<a href="setup.html">Making sure you have everything</a><br>
<div class="divider"></div>
<strong>Week 1</strong><br>
<span>&bull; Day 1 </span> - <a href="chap1-1.html"> "Things need to change"</a><br>
<span>&bull; Day 3 </span> - <a href="chap1-2.html"> "A possible solution"</a><br>
<span>&bull; Day 4 </span> - <a href="chap1-3.html"> "A decision is reached"</a><br>
<span>&bull; Day 5 </span> - <a href="chap1-4.html"> "Working like a team"</a><br>
<div class="divider"></div>
<strong>After Hours Week 1</strong><br>
&bull;&nbsp;&nbsp;<a href="afterhours1-1.html">"History Lesson"</a><br>
<div class="divider"></div>
<strong>Week 2</strong><br>
<span>&bull; Day 1 </span> - <a href="chap2-1.html"> "We are coders, we use Git!"</a><br>
<span>&bull; Day 2 </span> - <a href="chap2-2.html"> "Making commitments"</a><br>
<span>&bull; Day 4 </span> - <a href="chap2-3.html"> "Let's do this right, not fast"</a><br>
<span>&bull; Summary </span> - <a href="chap2-4.html"> John's Notes</a><br>
<div class="divider"></div>
<strong>After Hours Week 2</strong><br>
&bull;&nbsp;&nbsp;<a href="afterhours2-1.html">"A Little Of Git's Internals"</a><br>
<div class="divider"></div>
<strong>Week 3</strong><br>
<span>&bull; Day 1 </span> - <a href="chap3-1.html"> "How do I see what's going on?"</a><br>
<span>&bull; Day 2 </span> - <a href="chap3-2.html"> "But I need more information"</a><br>
<span>&bull; Day 3 </span> - <a href="chap3-3.html"> "What actually changed?"</a><br>
<span>&bull; Day 4 </span> - <a href="chap3-4.html"> "Finding a good reference point"</a><br>
<span>&bull; Day 5 </span> - <a href="chap3-5.html"> "Putting things back again"</a><br>
<span>&bull; Summary </span> - <a href="chap3-6.html"> John's Notes</a><br>
<div class="divider"></div>
<strong>After Hours Week 3</strong><br>
&bull;&nbsp;&nbsp;<a href="afterhours3-1.html">"A Closer Look At Diffs and Tags"</a><br>
<div class="divider"></div>
<strong>Week 4</strong><br>
<span>&bull; Day 1 </span> - <a href="chap4-1.html"> "We're getting somewhere"</a><br>
<span>&bull; Day 2 </span> - <a href="chap4-2.html"> "Branches galore"</a><br>
<span>&bull; Day 3 </span> - <a href="chap4-3.html"> "Tricking the twigs"</a><br>
<span>&bull; Day 4 </span> - <a href="chap4-4.html"> "I pressed delete..."</a><br>
<span>&bull; Day 5 </span> - <a href="chap4-5.html"> "Conflicting information"</a><br>
<span>&bull; Summary </span> - <a href="chap4-6.html"> John's Notes</a><br>
<div class="divider"></div>
<strong>After Hours Week 4</strong><br>
&bull;&nbsp;&nbsp;<a href="afterhours4-1.html">"Merge merge merge"</a><br>
&bull;&nbsp;&nbsp;<a href="afterhours4-2.html">"Grepping your life away"</a><br>
<div class="divider"></div>
<strong>Week 5</strong><br>
<span>&bull; Day 1 </span> - <a href="chap5-1.html"> "This isn't working for me John"</a><br>
<span>&bull; Day 2 </span> - <a href="chap5-2.html"> "Back to logging"</a><br>
<span>&bull; Day 4 </span> - <a href="chap5-3.html"> "Advanced Techniques"</a><br>
<span>&bull; Summary </span> - <a href="chap5-4.html"> John's Notes</a><br>
<div class="divider"></div>
<strong>After Hours Week 5</strong><br>
&bull;&nbsp;&nbsp;<a href="afterhours5-1.html">"Splitting up commits the easy way"</a><br>
<div class="divider"></div>
<strong>Week 6</strong><br>
<span>&bull; Day 1 </span> - <a href="chap6-1.html"> "My private little stash"</a><br>
<span>&bull; Day 2 </span> - <a href="chap6-2.html"> "What?! No backup?"</a><br>
<span>&bull; Day 3 </span> - <a href="chap6-3.html"> "Is this clone for real?"</a><br>
<span>&bull; Day 4 </span> - <a href="chap6-4.html"> "Help I'm no longer up to date?"</a><br>
<span>&bull; Day 5 </span> - <a href="chap6-5.html"> "I'm putting my foot down"</a><br>
<span>&bull; Summary </span> - <a href="chap6-6.html"> John's Notes</a><br>
<div class="divider"></div>
<strong>After Hours Week 6</strong><br>
&bull;&nbsp;&nbsp;<a href="afterhours6-1.html">"Tug of war"</a><br>
&bull;&nbsp;&nbsp;<a href="afterhours6-2.html">"Referring to objects"</a><br>
<div class="divider"></div>
<strong>Week 7</strong><br>
<span>&bull; Day 1 </span> - <a href="chap7-1.html"> "Networking with a difference"</a><br>
<span>&bull; Day 2 </span> - <a href="chap7-2.html"> "Now let's work together"</a><br>
<span>&bull; Day 3 </span> - <a href="chap7-3.html"> "Rebasing our commitments"</a><br>
<span>&bull; Day 4 </span> - <a href="chap7-4.html"> "Starting to get rebased"</a><br>
<span>&bull; Day 5 </span> - <a href="chap7-5.html"> "I could rebase the world"</a><br>
<span>&bull; Summary </span> - <a href="chap7-6.html"> John's Notes</a><br>
<div class="divider"></div>
<strong>After Hours Week 7</strong><br>
&bull;&nbsp;&nbsp;<a href="afterhours7-1.html">"Network Communicating"</a><br>
<div class="divider"></div>
<strong>Week 8</strong><br>
<span>&bull; Day 1 </span> - <a href="chap8-1.html"> "Give a man a patch"</a><br>
<span>&bull; Day 2 </span> - <a href="chap8-2.html"> "Looking for problems"</a><br>
<span>&bull; Day 3 </span> - <a href="chap8-3.html"> "Filtered repos"</a><br>
<span>&bull; Day 4 </span> - <a href="chap8-4.html"> "Let's make a library"</a><br>
<span>&bull; Day 5 </span> - <a href="chap8-5.html"> "Shhh....we're in a library"</a><br>
<span>&bull; Summary </span> - <a href="chap8-6.html"> John's Notes</a><br>
<div class="divider"></div>
<strong>After Hours Week 8</strong><br>
&bull;&nbsp;&nbsp;<a href="afterhours8-1.html">"Fishing for beginners"</a><br>
<div class="divider"></div>
<strong>A little extra help</strong><br>
&bull;&nbsp;&nbsp;<a href="chap9-1.html">Taking things further</a><br>
&bull;&nbsp;&nbsp;<a href="chap9-2.html">The end of the journey</a><br>
<div class="divider"></div>

				
				<td class="fade_right">&nbsp;</td>
              </tr>
              <tr>
                <td class="fade_bot">&nbsp;</td>
                <td class="fade_corner">&nbsp;</td>
              </tr>
            </table>              <h1>&nbsp;</h1>
              </td>
            <td><table width="100%"  border="0" cellspacing="0" cellpadding="0">
              <tr>
                <td class="read_content">
<h1>Week 6</h1><h2>Day 3 - "Is this clone for real?"</h2>
<h3>Not entirely as expected</h3>
We now have a clone of the repository and we can start to look at how we can play with branches and see how the two are different.<br><div id="trenchblock"><strong>In the trenches...</strong><br>
"Klaus, this doesn't make sense though. I cloned my repo, but my branches have vanished," started Rob, rather worriedly.<br><br>"I'm sure they haven't gone anywhere," shouted John.<br><br>Rob's reply was quick and certain, "They have! Run a git branch on your clone and see for yourself"<br><br>"Oh!"<br><br>Rob smiled the smug smile of a man who is pleased he was right.<br><br> * * * <br><br>"Rob?" asked John tentatively, aware of his previous state of anguish.<br><br>His reply indicated a less than stressed demeanour, "Sup, dude?".<br><br>John was pleasantly surprised, "Did you sort out the branch issue?"<br><br>Rob began walking over to John, "Yeh, try running git branch with the r parameter."<br></div><br>You may be thinking that we now have a detached copy of the other branches in our repository.
That's not exactly accurate.
Let us run the command that Rob suggested and see what is happening.<br><div id="codeblock"><code><strong>john@satsuki:~/coderepo-cl$ git branch</strong><br>
* master<br>
<strong>john@satsuki:~/coderepo-cl$ git branch -r</strong><br>
  origin/HEAD -&gt; origin/master<br>
  origin/master<br>
  origin/wonderful<br>
  origin/zaney<br>
<strong>john@satsuki:~/coderepo-cl$</strong><br>
</code></div><br>Whilst we have all the objects in our repository, we do not yet have our branches set up locally.
They are available, but they have not yet been set up locally.
To explain this we need to introduce the concept of remote tracking branches.
We are familiar with local branches.
Local branches allowed us to make commits locally in a safe and separated environment.
Remote tracking branches are links to remote branches which allow us to track the development of that branch and bring it in to a local one if we so desire.<br><br>Let us take a look at what we can do with these remote tracking branches.
Notice in the output above, we have the word <code class="ncode">origin</code> in front of the branch names.
When we clone a repository, Git automatically sets up what is called a <em>remote</em>.
We can view this by using the <code class="ncode">git remote</code> tool.<br><div id="codeblock"><code><strong>john@satsuki:~/coderepo-cl$ git remote</strong><br>
origin<br>
<strong>john@satsuki:~/coderepo-cl$ git remote -v</strong><br>
origin	/home/john/coderepo (fetch)<br>
origin	/home/john/coderepo (push)<br>
<strong>john@satsuki:~/coderepo-cl$</strong><br>
</code></div><br>As you can see from the output above, the <strong>origin</strong> remote definition points to the original folder that our repository came from.
So now we know that when referring to <code class="ncode">origin/master</code>, we are really talking about the <strong>master</strong> branch which is located at the remote location <strong>origin</strong>.<br><br>We are going to spend a little while now learning about remote branches and how they differ to local branches.
Let us spend a few minutes trying some of our normal operations against a remote branch.
The first operation we are going to try is a diff.
We are going to run a diff between our current <strong>master</strong> branch and the <strong>wonderful</strong> branch as it stands in the original repository, so we should be diffing between <code class="ncode">master</code> and <code class="ncode">origin/wonderful</code>.
For brevity, we are also going to limit the changes shown to those which affect <code class="ncode">newfile1</code> only, by appending <code class="ncode"> -- &lt;filename&gt;</code> to the command.<br><div id="codeblock"><code><strong>john@satsuki:~/coderepo-cl$ git diff master origin/wonderful -- newfile1</strong><br>
diff --git a/newfile1 b/newfile1<br>
index f32a0e6..ef20984 100644<br>
--- a/newfile1<br>
+++ b/newfile1<br>
@@ -1,3 +1,2 @@<br>
 A new file<br>
-and some more awesome changes<br>
-Some mega important changes<br>
+and some more changes<br>
<strong>john@satsuki:~/coderepo-cl$</strong><br>
</code></div><br>So we can see that our diff command completed successfully.
Note that this command requires no connection to our <strong>origin</strong> repository, as all of the data has been cloned locally, more on this later.<br><br>Let us run another command now and learn a little more about what the remote reference <strong>origin</strong> really means.<br><div id="codeblock"><code><strong>john@satsuki:~/coderepo-cl$ git remote show origin</strong><br>
* remote origin<br>
  Fetch URL: /home/john/coderepo<br>
  Push  URL: /home/john/coderepo<br>
  HEAD branch: master<br>
  Remote branches:<br>
    master    tracked<br>
    wonderful tracked<br>
    zaney     tracked<br>
  Local branch configured for 'git pull':<br>
    master merges with remote master<br>
  Local ref configured for 'git push':<br>
    master pushes to master (up to date)<br>
<strong>john@satsuki:~/coderepo-cl$</strong><br>
</code></div><br>Though this command introduces some terms that we are not yet familiar with yet, like push, pull and fetch, we can see that the <strong>origin</strong> remote has been set up to <em>track</em> three branches called, <strong>master</strong>, <strong>wonderful</strong> and <strong>zaney</strong>.
So although these branches are not yet usable in the way a local branch would be, it is comforting to know that Git does know about them.
Let us continue playing with the remote branch and run a <code class="ncode">git log</code> command against it.<br><div id="codeblock"><code><strong>john@satsuki:~/coderepo-cl$ git log origin/master -- newfile1</strong><br>
commit 9cb2af2a00fd2253060e6bf8cc6c377b3d55ecea<br>
Author: John Haskins &lt;john.haskins@tamagoyakiinc.koala&gt;<br>
Date:   Tue Apr 19 16:43:59 2011 +0100<br>
<br>
    Important Update<br>
<br>
commit d50ffb2fa536d869f2c4e89e8d6a48e0a29c5cc1<br>
Merge: ed2301b 7cc32db<br>
Author: John Haskins &lt;john.haskins@tamagoyakiinc.koala&gt;<br>
Date:   Fri Apr 1 07:42:04 2011 +0100<br>
<br>
    Merged in zaney<br>
<br>
...<br>
...<br>
...<br>
</code></div><br>Again, this requires no connection to the <strong>origin</strong> repository at all and works as expected.
Let us try something really funky now, let us try checking out a remote branch so that we can view the file system.
We are now going to try checking out the remote branch called <strong>wonderful</strong>.<br><div id="codeblock"><code><strong>john@satsuki:~/coderepo-cl$ git checkout origin/wonderful</strong><br>
Note: checking out 'origin/wonderful'.<br>
<br>
You are in 'detached HEAD' state. You can look around, make experimental<br>
changes and commit them, and you can discard any commits you make in this <br>
state without impacting any branches by performing another checkout.<br>
<br>
If you want to create a new branch to retain commits you create, you may<br>
do so (now or later) by using -b with the checkout command again. Example:<br>
<br>
  git checkout -b new_branch_name<br>
<br>
HEAD is now at cfbecab... Fantastic new feature<br>
<strong>john@satsuki:~/coderepo-cl$</strong><br>
</code></div><br>Interesting.
This is not what we are used to seeing.
When we have checked out branches before, we have always been presented with a <code class="ncode">Switched to branch 'xxxxxx'</code> message.
Now we are seeing a funny message about having a detached HEAD.
This is because we are not actually on a branch.
We can make changes as we are advised, we can even make commits, but these will not actually become integrated into any branches.
In essence these commits would be left dangling and after time, because no branch points to them, they would get deleted by garbage collection routines.<br><br>Running the <code class="ncode">git branch</code> command below confirms our suspicions.<br><div id="codeblock"><code><strong>john@satsuki:~/coderepo-cl$ git branch -v</strong><br>
* (no branch) cfbecab Fantastic new feature<br>
  master      37950f8 Continued Development<br>
<strong>john@satsuki:~/coderepo-cl$</strong><br>
</code></div><br>So we really need to figure out how to make these branches exist locally so that we can commit to them and retain those commits.
To do this we use the <code class="ncode">git branch</code> tool again, but we use it in a slightly different manner.<br><div id="codeblock"><code><strong>john@satsuki:~/coderepo-cl$ git checkout -b wonderful origin/wonderful</strong><br>
Branch wonderful set up to track remote branch wonderful from origin.<br>
Switched to a new branch 'wonderful'<br>
<strong>john@satsuki:~/coderepo-cl$</strong><br>
</code></div><br>We are now on a local instance of the <strong>wonderful</strong> branch.
Let us take a minute to understand what that means.
As Git is a distributed environment, our local <strong>wonderful</strong> branch, is not going to be synchronised with the remote end automatically.
It would require effort on our part.
What this does mean though, is that we are able to begin committing to this branch and experimenting with it.<br><br><table border="0" cellpadding="0" cellspacing="0" width="100%">
					<tr>
						<td><p align="left"><a href="chap6-2.html"><img src="images/prev.png" alt="Previous Day" height="29" border="0"></a></p></td>
						<td><p align="right"><a href="chap6-4.html"><img src="images/next.png" alt="Next Day" height="29" border="0"></a></p></td>
					</tr>
				</table>                  </td>
                <td class="fade_right">&nbsp;</td>
              </tr>
              <tr>
                <td class="fade_bot">&nbsp;</td>
                <td class="fade_corner">&nbsp;</td>
              </tr>
            </table></td>
            </tr>
          </table>
		</td>
      </tr>
      <tr>
        <td class="foot"><a href="index.html">home</a> | <a href="download.html">download</a> | <a href="read.html">read now</a> | <a href="source.html">source</a> | <a href="feedback.html">feedback</a> | <a href="legal.html">legal stuff</a><br>
        </td>
      </tr>
    </table></td>
  </tr>
</table>
</body>
</html>
